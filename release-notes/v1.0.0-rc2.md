# Release Notes: aws-object-search v1.0.0-rc2

## Overview
This release candidate introduces smart file type filtering for search results, a major usability improvement that reduces noise in search output by focusing on project manager-relevant files.

## What's New

### File Type Filtering for Search Results (#23)
Implemented intelligent file type filtering to show only the files that matter for project management workflows.

**Default Behavior:** Searches now return only PM-relevant files (FASTQ, BAM, CRAM, VCF, and config files) by default, eliminating noise from index and metadata files.

**Fine-grained Control:** Use command-line flags to customize what's included:
- `-a/--all`: Show all results
- `-r/--raw-reads`: Include FASTQ files
- `-p/--mapped-reads`: Include BAM/CRAM files
- `-v/--vcf`: Include VCF files
- `-g/--configs`: Include config files
- `-n/--no-index`: Exclude index files

Example usage:
```bash
# Default filtering (PM-relevant only)
bin/search-aws "query"

# All results
bin/search-aws "query" --all

# Specific file types
bin/search-aws "query" --raw-reads --vcf
```

## Infrastructure & Internal Improvements

### File Locking for Concurrent Scans (#29)
- Added `--flock` option to prevent concurrent aos-scan processes
- Uses fcntl.flock() for cross-platform file-based locking
- Graceful failure notification if a scan is already running

### Automatic Archival of Old Scan Files (#25)
- Old scan files automatically move to `s3_objects/archive/{year}/{month}/{day}/` after indexing
- Keeps the catalog root clean with only current scans
- Preserves disk space by moving rather than copying files

### Code Quality and Developer Experience (#28, #31)
- Pre-commit hooks with automated code quality checks
- Gitlint for commit message validation (50/72 character limits)
- Updated ruff and pre-commit-hooks to latest versions
- Removed legacy scripts

## Testing
All changes have been thoroughly tested:
- 50+ test cases pass
- Integration tests verify end-to-end functionality
- Code quality checks pass via ruff and pre-commit

## Getting Started

### Installation
```bash
./deploy
```

### Quick Start with File Type Filtering
```bash
# Search with smart filtering (shows only PM-relevant files)
bin/search-aws "Sample_ID"

# Want to see everything?
bin/search-aws "Sample_ID" --all

# Or select specific types
bin/search-aws "Sample_ID" --raw-reads --mapped-reads --vcf
```

## Issues Resolved
- #23: File type filtering for search results (primary feature)
- #29: File locking for concurrent scan prevention
- #25: Automatic archival of old scan files
- #28: Code quality automation (pre-commit, gitlint)
